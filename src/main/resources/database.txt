drop database Satellite_Imagery;

create database Satellite_Imagery;

use Satellite_Imagery;

create table user (
	id bigint primary key auto_increment,
	login varchar(255) unique not null,
	password varchar(255) not null
);

create table role (
	id bigint primary key auto_increment,
	name varchar(255) unique not null
);

create table user_role (
	user_id bigint not null,
	role_id bigint not null,
	foreign key (user_id) references user(id),
	foreign key (role_id) references role(id)
);

create table country (
	id bigint primary key auto_increment,
	name varchar(255) unique not null,
	description varchar(255) not null
);

create table region (
	id bigint primary key auto_increment,
	name varchar(255) unique not null,
	description varchar(255) not null,
	country_id bigint not null,
	foreign key (country_id) references country(id)
);

create table city (
	id bigint primary key auto_increment,
	name varchar(255) unique not null,
	description varchar(255) not null,
	region_id bigint not null,
	foreign key (region_id) references region(id)
);

create table attraction (
	id bigint primary key auto_increment,
	name varchar(255) unique not null,
	description varchar(255) not null,
	city_id bigint not null,
	foreign key (city_id) references city(id)
);

create table image (
    location_type varchar(255) not null,
    location_id bigint not null,
    data longblob not null,
    unique (location_type, location_id)
);
